!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("cross-fetch")):"function"==typeof define&&define.amd?define(["cross-fetch"],e):"object"==typeof exports?exports.ca=e(require("cross-fetch")):t.ca=e(t.fetch)}("undefined"!=typeof self?self:this,(function(t){return function(){"use strict";var e={268:function(e){e.exports=t}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var a=n[t]={exports:{}};return e[t](a,a.exports,r),a.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};return function(){r.r(o),r.d(o,{assetMeta:function(){return s},children:function(){return f},html:function(){return h},meta:function(){return l}});var t=r(268),e=r.n(t);const n="https://www.canada.ca/";var a={_callbacks:[],active:0,maxActive:3,saturated:!1,ready:function(){var t=new Promise((function(t){a._callbacks.push(t)}));return a.next(),t},clear:function(){a.active--,a.saturated=a.active>=a.maxActive,a.next()},next:function(){if(!a.saturated){var t=a._callbacks.shift();t&&(a.active++,a.saturated=a.active>=a.maxActive,t.call(),a.next())}}};function c(){return"?_="+(new Date).getTime()}function i(t){if("string"==typeof t&&(t={path:t}),"object"==typeof t&&"string"==typeof t.path){var e=t.path.match(/(^|\/)(en|fr)(\/?[^\.?]*|$)/);if(!e)throw new Error("Invalid node path "+t.path);return t.path=e[0].replace(/^\/|\/$/g,""),t}throw new Error("Invalid node")}function u(t){if(!t.ok)throw new Error(t.statusText);if(0!==t.url.indexOf(n))throw new Error("Redirect");if(-1!==t.url.indexOf("/errors/404.html"))throw new Error("Not Found");return"application/json;charset=utf-8"===t.headers.get("content-type")?t.json():t.text()}function f(t,r){return r=i(r),a.ready().then((function(){return e()(n+r.path+".sitemap.xml"+c())})).then(u).then((function(e){var n=0==t.length;return e.match(/<url>(.*?)<\/url>/g).forEach((function(e){var r=normalize(e).path,o=Date.parse(e.match(/\d{4}-\d{2}-\d{2}/)[0])/1e3;if(!n)for(var a=t.length-1;a>=0;a--)if(t[a].path===r)return void(t[a].lastmod=o);t.push({path:r,lastmod:o})})),t})).catch((function(){return t})).finally(a.clear)}function l(t){return t=i(t),a.ready().then((()=>e()(n+t.path+"/jcr:content.json"+c()))).then(u).then((function(e){for(var n in e)"true"===e[n]?e[n]=!0:"false"===e[n]?e[n]=!1:-1!==n.indexOf("@TypeHint")?delete e[n]:/[\d\:]{8} \w{3}-\d{4}$/.test(e[n])&&(e[n]=Date.parse(e[n])/1e3);return t.meta=e,t})).catch((function(e){return t.meta=e,t})).finally(a.clear)}function h(t){return t=i(t),a.ready().then((function(){return e()(n+t.path+".html"+c())})).then(u).then((function(e){return t.html=e.trim().replace(/\s{2,}/g," "),t})).catch((function(e){return t.html=e,t})).finally(a.clear)}function s(t){return t=function(t){if("string"==typeof t){var e=t.match(/(^|\/)content\/dam\/([^?]*|$)/);if(!e)throw new Error("Invalid asset path "+t);return e[0].replace(/^\/|\/$/g,"")}throw new Error("Invalid asset")}(t),a.ready().then((function(){return e()(n+t+"/jcr:content.json"+c())})).then(u).then((function(e){return e.path=t,e})).catch((function(t){return t})).finally(a.clear)}}(),o}()}));