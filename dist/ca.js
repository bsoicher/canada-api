!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("cross-fetch")):"function"==typeof define&&define.amd?define(["cross-fetch"],e):"object"==typeof exports?exports.ca=e(require("cross-fetch")):t.ca=e(t.fetch)}("undefined"!=typeof self?self:this,(function(t){return(()=>{"use strict";var e={268:e=>{e.exports=t}},r={};function n(t){var a=r[t];if(void 0!==a)return a.exports;var o=r[t]={exports:{}};return e[t](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};return(()=>{n.r(a),n.d(a,{assetMeta:()=>s,children:()=>f,html:()=>h,meta:()=>l});var t=n(268),e=n.n(t);const r="https://www.canada.ca/";var o={_callbacks:[],active:0,maxActive:3,saturated:!1,ready:function(){var t=new Promise((function(t){o._callbacks.push(t)}));return o.next(),t},clear:function(){o.active--,o.saturated=o.active>=o.maxActive,o.next()},next:function(){if(!o.saturated){var t=o._callbacks.shift();t&&(o.active++,o.saturated=o.active>=o.maxActive,t.call(),o.next())}}};function c(){return"?_="+(new Date).getTime()}function i(t){if("string"==typeof t&&(t={path:t}),"object"==typeof t&&"string"==typeof t.path){var e=t.path.match(/(^|\/)(en|fr)(\/?[^\.?]*|$)/);if(!e)throw new Error("Invalid node path "+t.path);return t.path=e[0].replace(/^\/|\/$/g,""),t}throw new Error("Invalid node")}function u(t){if(!t.ok)throw new Error(t.statusText);if(0!==t.url.indexOf(r))throw new Error("Redirect");if(-1!==t.url.indexOf("/errors/404.html"))throw new Error("Not Found");return"application/json;charset=utf-8"===t.headers.get("content-type")?t.json():t.text()}function f(t,n){return n=i(n),o.ready().then((function(){return e()(r+n.path+".sitemap.xml"+c())})).then(u).then((function(e){var r=0==t.length;return e.match(/<url>(.*?)<\/url>/g).forEach((function(e){var n=normalize(e).path,a=Date.parse(e.match(/\d{4}-\d{2}-\d{2}/)[0])/1e3;if(!r)for(var o=t.length-1;o>=0;o--)if(t[o].path===n)return void(t[o].lastmod=a);t.push({path:n,lastmod:a})})),t})).catch((function(){return t})).finally(o.clear)}function l(t){return t=i(t),o.ready().then((()=>e()(r+t.path+"/jcr:content.json"+c()))).then(u).then((function(e){for(var r in e)"true"===e[r]?e[r]=!0:"false"===e[r]?e[r]=!1:-1!==r.indexOf("@TypeHint")?delete e[r]:/[\d\:]{8} \w{3}-\d{4}$/.test(e[r])&&(e[r]=Date.parse(e[r])/1e3);return t.meta=e,t})).catch((function(e){return t.meta=e,t})).finally(o.clear)}function h(t){return t=i(t),o.ready().then((function(){return e()(r+t.path+".html"+c())})).then(u).then((function(e){return t.html=e.trim().replace(/\s{2,}/g," "),t})).catch((function(e){return t.html=e,t})).finally(o.clear)}function s(t){return t=function(t){if("string"==typeof t){var e=t.match(/(^|\/)content\/dam\/([^?]*|$)/);if(!e)throw new Error("Invalid asset path "+t);return e[0].replace(/^\/|\/$/g,"")}throw new Error("Invalid asset")}(t),o.ready().then((function(){return e()(r+t+"/jcr:content.json"+c())})).then(u).then((function(e){return e.path=t,e})).catch((function(t){return t})).finally(o.clear)}})(),a})()}));